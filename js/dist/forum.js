(()=>{var o={n:n=>{var r=n&&n.__esModule?()=>n.default:()=>n;return o.d(r,{a:r}),r},d:(n,r)=>{for(var e in r)o.o(r,e)&&!o.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:r[e]})},o:(o,n)=>Object.prototype.hasOwnProperty.call(o,n),r:o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}},n={};(()=>{"use strict";o.r(n),o.d(n,{extend:()=>T});const r=flarum.core.compat["forum/app"];var e=o.n(r);const t=flarum.core.compat["common/extend"],s=flarum.core.compat["forum/utils/UserControls"];var a=o.n(s);const i=flarum.core.compat["common/components/Button"];var c=o.n(i);const u=flarum.core.compat["forum/components/CommentPost"];var l=o.n(u);const f=flarum.core.compat["common/components/LinkButton"];var d=o.n(f);const g=flarum.core.compat["forum/components/UserPage"];var p=o.n(g);const h=flarum.core.compat["common/models/Discussion"];var v=o.n(h);const b=flarum.core.compat["common/models/User"];var y=o.n(b);const _=flarum.core.compat["common/components/Badge"];var U=o.n(_);const x=flarum.core.compat["common/extenders"];var P=o.n(x);function B(o,n){return B=Object.setPrototypeOf||function(o,n){return o.__proto__=n,o},B(o,n)}const N=flarum.core.compat["common/helpers/avatar"];var O=o.n(N);const j=flarum.core.compat["common/helpers/username"];var k=o.n(j);const w=flarum.core.compat["common/utils/Stream"];var S=o.n(w);const I=flarum.core.compat["common/components/Placeholder"];var M=o.n(I);const C=flarum.core.compat["common/components/LoadingIndicator"];var L=o.n(C),D=function(o){var n,r;function t(){return o.apply(this,arguments)||this}r=o,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,B(n,r);var s=t.prototype;return s.oninit=function(n){o.prototype.oninit.call(this,n),this.loading=!0,this.ignoredUsers=e().session.user.ignoredUsers(),this.loadUser(e().session.user.username()),this.loading=!1},s.content=function(){var o=this;return this.loading?m("div",{className:"DiscussionList"},m(L(),null)):0===this.ignoredUsers.length?m("div",{className:"DiscussionList"},m(M(),{text:e().translator.trans("fof-ignore-users.forum.profile_page.no_ignored")})):m("table",{className:"NotificationGrid"},this.ignoredUsers.map((function(n,r){return m("tr",null,m("td",null,m("a",{href:e().route.user(n),config:m.route},m("h3",null,O()(n,{className:"ignorePage-avatar"})," ",k()(n)))),m("td",{className:"ignorePage-button"},c().component({icon:"fas fa-comment",type:"button",className:"Button Button--warning",onclick:function(){confirm(e().translator.trans("fof-ignore-users.forum.user_controls.unignore_confirmation"))&&(n.save({ignored:!1}),o.ignoredUsers.splice(r,1),e().session.user.ignoredUsers=S()(o.ignoredUsers))}.bind(n)},e().translator.trans("fof-ignore-users.forum.user_controls.unignore_button"))))})))},s.show=function(o){this.user=e().session.user,m.redraw()},t}(p());const T=[new(P().Model)(y()).attribute("ignored").hasMany("ignoredUsers").attribute("canBeIgnored"),(new(P().Routes)).add("user.ignoredUsers","/ignoredUsers",D)];e().initializers.add("fof-ignore-users",(function(){(0,t.extend)(a(),"userControls",(function(o,n){e().session.user!==n&&e().session.user&&n.canBeIgnored()&&(n.ignored()?o.add("unignore",m(c(),{icon:"fas fa-comment",onclick:function(){confirm(e().translator.trans("fof-ignore-users.forum.user_controls.unignore_confirmation"))&&this.save({ignored:!1})}.bind(n)},e().translator.trans("fof-ignore-users.forum.user_controls.unignore_button"))):o.add("ignore",m(c(),{icon:"fas fa-comment-slash",onclick:function(){confirm(e().translator.trans("fof-ignore-users.forum.user_controls.ignore_confirmation"))&&this.save({ignored:!0})}.bind(n)},e().translator.trans("fof-ignore-users.forum.user_controls.ignore_button"))))})),(0,t.extend)(l().prototype,"elementAttrs",(function(o){var n=this.attrs.post.user();return n&&n.ignored()&&(o.className+=" Post--hidden"),o})),(0,t.extend)(l().prototype,"headerItems",(function(o){var n=this.attrs.post;!n.isHidden()&&n.user()&&n.user().ignored()&&o.add("ignore-toggle",c().component({className:"Button Button--default Button--more",icon:"fas fa-ellipsis-h",onclick:this.toggleContent.bind(this)}))})),(0,t.extend)(p().prototype,"navItems",(function(o){e().session.user&&e().session.user===this.user&&o.add("ignored-users",m(d(),{href:e().route("user.ignoredUsers"),icon:"fas fa-user-slash"},e().translator.trans("fof-ignore-users.forum.profile_link")))})),(0,t.extend)(v().prototype,"badges",(function(o){var n;this.user()&&this.user().ignored()&&(n=U().component({label:e().translator.trans("fof-ignore-users.forum.badge.discussion_label"),icon:"fas fa-user-slash",type:"ignored"})),n&&o.add("user-discussion-ignored",n)})),(0,t.extend)(y().prototype,"badges",(function(o){var n;this.ignored()&&(n=U().component({label:e().translator.trans("fof-ignore-users.forum.badge.user_label"),icon:"fas fa-user-slash",type:"ignored"})),n&&o.add("user-ignored",n)}))}))})(),module.exports=n})();
//# sourceMappingURL=forum.js.map