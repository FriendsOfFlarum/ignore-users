(()=>{var o={n:r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return o.d(e,{a:e}),e},d:(r,e)=>{for(var n in e)o.o(e,n)&&!o.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:e[n]})},o:(o,r)=>Object.prototype.hasOwnProperty.call(o,r),r:o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}},r={};(()=>{"use strict";o.r(r);const e=flarum.core.compat["forum/app"];var n=o.n(e);const t=flarum.core.compat["common/Model"];var s=o.n(t);const a=flarum.core.compat["common/models/User"];var i=o.n(a);const u=flarum.core.compat["common/extend"],c=flarum.core.compat["forum/utils/UserControls"];var f=o.n(c);const l=flarum.core.compat["common/components/Button"];var d=o.n(l);const p=flarum.core.compat["forum/components/CommentPost"];var g=o.n(p);const h=flarum.core.compat["common/components/LinkButton"];var v=o.n(h);const b=flarum.core.compat["forum/components/UserPage"];var y=o.n(b);function _(o,r){return _=Object.setPrototypeOf||function(o,r){return o.__proto__=r,o},_(o,r)}const U=flarum.core.compat["common/helpers/avatar"];var B=o.n(U);const P=flarum.core.compat["common/helpers/username"];var x=o.n(P);const O=flarum.core.compat["common/utils/Stream"];var N=o.n(O),j=function(o){var r,e;function t(){return o.apply(this,arguments)||this}e=o,(r=t).prototype=Object.create(e.prototype),r.prototype.constructor=r,_(r,e);var s=t.prototype;return s.oninit=function(r){o.prototype.oninit.call(this,r),this.loading=!0,this.ignoredUsers=n().session.user.ignoredUsers(),this.loadUser(n().session.user.username())},s.content=function(){var o=this;return m("table",{className:"NotificationGrid"},this.ignoredUsers.map((function(r,e){return m("tr",null,m("td",null,m("a",{href:n().route.user(r),config:m.route},m("h3",null,B()(r,{className:"ignorePage-avatar"})," ",x()(r)))),m("td",{className:"ignorePage-button"},d().component({icon:"fas fa-comment",type:"button",className:"Button Button--warning",onclick:function(){confirm(n().translator.trans("fof-ignore-users.forum.user_controls.unignore_confirmation"))&&(r.save({ignored:!1}),o.ignoredUsers.splice(e,1),n().session.user.ignoredUsers=N()(o.ignoredUsers))}.bind(r)},n().translator.trans("fof-ignore-users.forum.user_controls.unignore_button"))))})))},s.show=function(o){this.user=n().session.user,m.redraw()},t}(y());const k=flarum.core.compat["common/models/Discussion"];var S=o.n(k);const I=flarum.core.compat["common/components/Badge"];var M=o.n(I);n().initializers.add("fof-ignore-users",(function(o){i().prototype.ignored=s().attribute("ignored"),i().prototype.ignoredUsers=s().hasMany("ignoredUsers"),i().prototype.canBeIgnored=s().attribute("canBeIgnored"),o.routes.ignoredUsers={path:"/ignoredUsers",component:j},(0,u.extend)(f(),"userControls",(function(o,r){n().session.user!==r&&n().session.user&&r.canBeIgnored()&&(r.ignored()?o.add("unignore",m(d(),{icon:"fas fa-comment",onclick:function(){confirm(n().translator.trans("fof-ignore-users.forum.user_controls.unignore_confirmation"))&&this.save({ignored:!1})}.bind(r)},n().translator.trans("fof-ignore-users.forum.user_controls.unignore_button"))):o.add("ignore",m(d(),{icon:"fas fa-comment-slash",onclick:function(){confirm(n().translator.trans("fof-ignore-users.forum.user_controls.ignore_confirmation"))&&this.save({ignored:!0})}.bind(r)},n().translator.trans("fof-ignore-users.forum.user_controls.ignore_button"))))})),(0,u.extend)(g().prototype,"elementAttrs",(function(o){var r=this.attrs.post.user();return r&&r.ignored()&&(o.className+=" Post--hidden"),o})),(0,u.extend)(g().prototype,"headerItems",(function(o){var r=this.attrs.post;!r.isHidden()&&r.user()&&r.user().ignored()&&o.add("ignore-toggle",d().component({className:"Button Button--default Button--more",icon:"fas fa-ellipsis-h",onclick:this.toggleContent.bind(this)}))})),(0,u.extend)(y().prototype,"navItems",(function(o){n().session.user&&n().session.user===this.user&&o.add("ignored-users",m(v(),{href:n().route("ignoredUsers"),icon:"fas fa-user-slash"},n().translator.trans("fof-ignore-users.forum.profile_link")))})),(0,u.extend)(S().prototype,"badges",(function(o){var r;this.user()&&this.user().ignored()&&(r=M().component({label:n().translator.trans("fof-ignore-users.forum.badge.discussion_label"),icon:"fas fa-user-slash",type:"ignored"})),r&&o.add("user-discussion-ignored",r)})),(0,u.extend)(i().prototype,"badges",(function(o){var r;this.ignored()&&(r=M().component({label:n().translator.trans("fof-ignore-users.forum.badge.user_label"),icon:"fas fa-user-slash",type:"ignored"})),r&&o.add("user-ignored",r)}))}))})(),module.exports=r})();
//# sourceMappingURL=forum.js.map